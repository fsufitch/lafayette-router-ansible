- name: Restart nginx
  ansible.builtin.systemd:
    name: "lafayette-nginx"
    state: restarted
    enabled: true
    daemon_reload: true
  listen:
    - "net.lafayette.nginx_proxy :: Service updated"
    - "net.lafayette.nginx_proxy :: SSL updated"

- name: Self-signed SSL certificate warning
  ansible.builtin.debug:
    msg: >
      Using autogenerated/self-signed SSL cert/key: {{ nginx_ssl_autogen_cert }} and {{ nginx_ssl_autogen_key }}.
      Please replace them with your own cert/key for proper security.
  listen:
    - "net.lafayette.nginx_proxy :: SSL self-signed"
